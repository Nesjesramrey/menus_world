{"ast":null,"code":"var _jsxFileName = \"/home/nesramblue/Nestor/Kodemia/menus_world/src/components/AddComment/index.jsx\",\n    _s = $RefreshSig$();\n\nimport './AddComment.css';\nimport { useState } from 'react';\nimport { Rating } from 'react-simple-star-rating';\nimport { createComment as sendComment } from '../../services/menus';\nimport { getIsLogeddIn, getIsUserAdmin } from '../../Auth/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AddComment(id) {\n  _s();\n\n  const [canComment, setCanComment] = useState(false); //state\n\n  const [text, setText] = useState(''); //value of rating\n\n  const [ratingValue, setRatingValue] = useState(0);\n  const [existComment, setExistComment] = useState(true); //state of logins\n\n  const [isLogIn, setIsLogIn] = useState(null);\n  const [isUser, setUser] = useState(null); // read cookies\n\n  console.log(getIsLogeddIn());\n  console.log(getIsUserAdmin()); //setIsLogIn(true);\n  //setUser(true);\n  //const idser = id;\n  //const userName = name;\n\n  const handleRating = rate => setRatingValue(rate / 20);\n\n  console.log(ratingValue);\n\n  const sendData = () => {\n    let today = new Date();\n    const data = {\n      user: 'Alan',\n      rating: ratingValue,\n      comment: text,\n      idUser: '23353',\n      date: today\n    };\n    const Url = 'http://localhost:8000/detalle/' + id;\n    fetch(Url, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(response => response.json()).then(data => {\n      console.log('Success:', data);\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n  };\n\n  const addNewcomment = msg => {\n    //not logIn\n    if (isLogIn === false) {\n      console.error('Para agregar comentarios debes iniciar sesión');\n    } else {\n      //Is logIn\n      if (isUser === true) {\n        //only user can add comments\n        setCanComment(false);\n        setText(msg);\n        sendData();\n      } else {\n        //admins can't comment\n        console.error('No se puede agregar comentarios con sesión de administrador');\n      }\n    }\n\n    window.location.reload(false);\n  };\n\n  function createContent() {\n    if (canComment === false) {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"addComment\",\n        type: \"button\",\n        onClick: () => setCanComment(true),\n        children: \"Agrega un comentario\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }, this);\n    }\n\n    if (canComment === true) {\n      return /*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"formAddComment\",\n        action: \"/action_page.php\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"textInstructions\",\n          children: \"Escribe un comentario sobre el platillo y deja tu puntuaci\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"addNewComment\",\n          name: \"newComment\",\n          placeholder: \"Escribe tu rese\\xF1a del platillo\",\n          onChange: e => setText(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Rating, {\n          transition: true,\n          onClick: handleRating,\n          ratingValue: ratingValue,\n          fillColor: '#ffd700',\n          emptyColor: '#888888',\n          size: 50\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"addComment\",\n          type: \"button\",\n          onClick: e => addNewcomment(text),\n          children: \"Enviar comentario\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 5\n      }, this);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"addCommentSection\",\n    children: createContent()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AddComment, \"F5L+IgzWkFlSZc6GyuVq5UM+Nm0=\");\n\n_c = AddComment;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddComment\");","map":{"version":3,"names":["useState","Rating","createComment","sendComment","getIsLogeddIn","getIsUserAdmin","AddComment","id","canComment","setCanComment","text","setText","ratingValue","setRatingValue","existComment","setExistComment","isLogIn","setIsLogIn","isUser","setUser","console","log","handleRating","rate","sendData","today","Date","data","user","rating","comment","idUser","date","Url","fetch","method","headers","body","JSON","stringify","then","response","json","catch","error","addNewcomment","msg","window","location","reload","createContent","e","target","value"],"sources":["/home/nesramblue/Nestor/Kodemia/menus_world/src/components/AddComment/index.jsx"],"sourcesContent":["import './AddComment.css';\r\nimport { useState } from 'react';\r\nimport { Rating } from 'react-simple-star-rating';\r\nimport { createComment as sendComment } from '../../services/menus';\r\nimport { getIsLogeddIn, getIsUserAdmin } from '../../Auth/auth';\r\n\r\nexport default function AddComment(id) {\r\n\tconst [canComment, setCanComment] = useState(false); //state\r\n\tconst [text, setText] = useState('');\r\n\r\n\t//value of rating\r\n\tconst [ratingValue, setRatingValue] = useState(0);\r\n\t\r\n\tconst [existComment, setExistComment] = useState(true);\r\n\r\n\t//state of logins\r\n\tconst [isLogIn, setIsLogIn] = useState(null);\r\n\tconst [isUser, setUser] = useState(null);\r\n\r\n\t// read cookies\r\n\tconsole.log(getIsLogeddIn());\r\n\tconsole.log(getIsUserAdmin());\r\n\t//setIsLogIn(true);\r\n\t//setUser(true);\r\n\t//const idser = id;\r\n\t//const userName = name;\r\n\r\n\tconst handleRating = (rate) => setRatingValue(rate / 20);\r\n\r\n\tconsole.log(ratingValue);\r\n\r\n\tconst sendData = () => {\r\n\t\tlet today = new Date();\r\n\r\n\t\tconst data = {\r\n\t\t\tuser: 'Alan',\r\n\t\t\trating: ratingValue,\r\n\t\t\tcomment: text,\r\n\t\t\tidUser: '23353',\r\n\t\t\tdate: today,\r\n\t\t};\r\n\t\tconst Url = 'http://localhost:8000/detalle/' + id;\r\n\r\n\t\tfetch(Url, {\r\n\t\t\tmethod: 'PATCH',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify(data),\r\n\t\t})\r\n\t\t\t.then((response) => response.json())\r\n\t\t\t.then((data) => {\r\n\t\t\t\tconsole.log('Success:', data);\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error('Error:', error);\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst addNewcomment = (msg) => {\r\n\t\t//not logIn\r\n\t\tif (isLogIn === false) {\r\n\t\t\tconsole.error('Para agregar comentarios debes iniciar sesión');\r\n\t\t} else {\r\n\t\t\t//Is logIn\r\n\t\t\tif (isUser === true) {\r\n\t\t\t\t//only user can add comments\r\n\t\t\t\tsetCanComment(false);\r\n\t\t\t\tsetText(msg);\r\n\t\t\t\tsendData();\r\n\t\t\t} else {\r\n\t\t\t\t//admins can't comment\r\n\t\t\t\tconsole.error('No se puede agregar comentarios con sesión de administrador');\r\n\t\t\t}\r\n\t\t}\r\n\t\twindow.location.reload(false);\r\n\t};\r\n\r\n\tfunction createContent() {\r\n\t\tif (canComment === false) {\r\n\t\t\treturn (\r\n\t\t\t\t<button id=\"addComment\" type=\"button\" onClick={() => setCanComment(true)}>\r\n\t\t\t\t\tAgrega un comentario\r\n\t\t\t\t</button>\r\n\t\t\t);\r\n\t\t}\r\n\t\tif (canComment === true) {\r\n\t\t\treturn (\r\n\t\t\t\t<form id=\"formAddComment\" action=\"/action_page.php\">\r\n\t\t\t\t\t<p id=\"textInstructions\">Escribe un comentario sobre el platillo y deja tu puntuación</p>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\tid=\"addNewComment\"\r\n\t\t\t\t\t\tname=\"newComment\"\r\n\t\t\t\t\t\tplaceholder=\"Escribe tu reseña del platillo\"\r\n\t\t\t\t\t\tonChange={(e) => setText(e.target.value)}\r\n\t\t\t\t\t></textarea>\r\n\t\t\t\t\t<Rating\r\n\t\t\t\t\t\ttransition\r\n\t\t\t\t\t\tonClick={handleRating}\r\n\t\t\t\t\t\tratingValue={ratingValue}\r\n\t\t\t\t\t\tfillColor={'#ffd700'}\r\n\t\t\t\t\t\temptyColor={'#888888'}\r\n\t\t\t\t\t\tsize={50}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button id=\"addComment\" type=\"button\" onClick={(e) => addNewcomment(text)}>\r\n\t\t\t\t\t\tEnviar comentario\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\treturn <div id=\"addCommentSection\">{createContent()}</div>;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}