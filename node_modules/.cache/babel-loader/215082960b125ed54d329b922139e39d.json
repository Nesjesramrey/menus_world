{"ast":null,"code":"var _jsxFileName = \"/home/nesramblue/Nestor/Kodemia/menus_world/src/pages/Detail/index.jsx\",\n    _s = $RefreshSig$();\n\n//#region imports\nimport './Detail.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom'; // Components\n\nimport NavBar from '../../components/NavBar';\nimport ImgDish from '../../components/ImgDish';\nimport DishDescription from '../../components/DishDescription';\nimport CreateComments from '../../components/Comments';\nimport AddComment from '../../components/AddComment';\nimport Recomendations from '../../components/Recommendations';\nimport TableRatings from '../../components/TableRatings'; //Services\n// import { listRestaurant as listDishes } from '../../services/menus';\n// import { dishById as readIdDish } from '../../services/menus';\n\nimport { calcRatings } from '../../services/calcRatings'; //#endregion\n//  - - - - - - - - - - - - - - - Main function - - - - - - - - - - - - - - -\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Detail() {\n  _s();\n\n  let {\n    dishId\n  } = useParams(); // id's database\n\n  const [dish, setDish] = useState([]); //object with data of dish\n\n  const [restaurant, setRestaurant] = useState(null); //name of selectec restaurant\n\n  const [recomendations, setRecomendations] = useState([]); //list of object for recomendations\n  //get dish\n\n  useEffect(() => {\n    document.title = \"Menu's World\";\n    const url = 'https://menus.api.nesjes.com/detalle/';\n    const id = dishId;\n    const fullURL = url + id;\n\n    const getList = async () => {\n      const urlList = 'https://menus.api.nesjes.com/menu/submenu?restaurantName=' + restaurant;\n      const list = await axios(urlList);\n\n      if (list.status = 200) {\n        setRecomendations(list.data);\n      }\n    };\n\n    const getAnswer = async () => {\n      const data = await axios(fullURL);\n\n      if (data.status === 200) {\n        const response = data.data;\n        setDish(response);\n        setRestaurant(response.restaurantName);\n        getList();\n      }\n    };\n\n    getAnswer();\n  }, []); // Generate list of comments\n\n  function showComments(data) {\n    const arrComment = data.comments ? data.comments : [];\n\n    if (arrComment.length > 0) {\n      let listComments = arrComment.map((comment, index) => CreateComments(comment, index));\n      return listComments;\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"noComments text-center\",\n        children: \"No hay comentarios aun, s\\xE9 el primero en comentar.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 5\n      }, this);\n    }\n  }\n\n  const allComments = showComments(dish); // values of ratings\n\n  const ratings = calcRatings(dish); //generate recomendations\n\n  const getRecomendations = () => {\n    let listRecomendations = [];\n    let filter = dish.category; //add recomendations\n\n    for (let dish of recomendations) {\n      let count = 0;\n\n      if (dish.category === filter && dish._id !== dishId) {\n        count++;\n        listRecomendations.push(dish);\n\n        if (count === 4) {\n          break;\n        }\n      }\n    } //add more recomendations\n\n\n    if (listRecomendations.length < 3) {\n      let count = listRecomendations.length;\n\n      for (let anotherDish of recomendations) {\n        if (anotherDish.category !== filter) {\n          count++;\n          listRecomendations.push(anotherDish);\n\n          if (count === 4) {\n            break;\n          }\n        }\n      }\n    }\n\n    return listRecomendations;\n  };\n\n  const listRecomendation = getRecomendations();\n  console.log(restaurant);\n  console.log(listRecomendation); //  - - - - - - - - - - - - - - - Return - - - - - - - - - - - - - - -\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid g-0\",\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container g-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col col-12 title text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Calificaciones del platillo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col col-12 col-md-6 g-0\",\n          children: ImgDish(dish)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col col-12 col-md-6 g-0\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"boxDish\",\n            children: [DishDescription(dish, ratings), TableRatings(ratings)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col col-12 col-md-6 g-0\",\n          children: [AddComment(dishId), allComments]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col col-12 col-md-6 text-center g-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              id: \"textOtherRec\",\n              className: \"text-center\",\n              children: \"Otras recomendaciones\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"colCardsRecommendations\",\n            children: Recomendations(listRecomendation)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Detail, \"XWCK80vuYYcU9gLijviEvENgIQk=\", false, function () {\n  return [useParams];\n});\n\n_c = Detail;\n\nvar _c;\n\n$RefreshReg$(_c, \"Detail\");","map":{"version":3,"names":["useEffect","useState","axios","useParams","NavBar","ImgDish","DishDescription","CreateComments","AddComment","Recomendations","TableRatings","calcRatings","Detail","dishId","dish","setDish","restaurant","setRestaurant","recomendations","setRecomendations","document","title","url","id","fullURL","getList","urlList","list","status","data","getAnswer","response","restaurantName","showComments","arrComment","comments","length","listComments","map","comment","index","allComments","ratings","getRecomendations","listRecomendations","filter","category","count","_id","push","anotherDish","listRecomendation","console","log"],"sources":["/home/nesramblue/Nestor/Kodemia/menus_world/src/pages/Detail/index.jsx"],"sourcesContent":["//#region imports\r\nimport './Detail.css';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams } from 'react-router-dom';\r\n\r\n// Components\r\nimport NavBar from '../../components/NavBar';\r\nimport ImgDish from '../../components/ImgDish';\r\nimport DishDescription from '../../components/DishDescription';\r\nimport CreateComments from '../../components/Comments';\r\nimport AddComment from '../../components/AddComment';\r\nimport Recomendations from '../../components/Recommendations';\r\nimport TableRatings from '../../components/TableRatings';\r\n\r\n//Services\r\n// import { listRestaurant as listDishes } from '../../services/menus';\r\n// import { dishById as readIdDish } from '../../services/menus';\r\nimport { calcRatings } from '../../services/calcRatings';\r\n//#endregion\r\n\r\n//  - - - - - - - - - - - - - - - Main function - - - - - - - - - - - - - - -\r\nexport default function Detail() {\r\n\tlet { dishId } = useParams(); // id's database\r\n\tconst [dish, setDish] = useState([]); //object with data of dish\r\n\tconst [restaurant, setRestaurant] = useState(null); //name of selectec restaurant\r\n\tconst [recomendations, setRecomendations] = useState([]); //list of object for recomendations\r\n\r\n\t//get dish\r\n\tuseEffect(() => {\r\n\t\tdocument.title = \"Menu's World\";\r\n\r\n\t\tconst url = 'https://menus.api.nesjes.com/detalle/';\r\n\t\tconst id = dishId;\r\n\t\tconst fullURL = url + id;\r\n\r\n\t\tconst getList = async () => {\r\n\t\t\tconst urlList = 'https://menus.api.nesjes.com/menu/submenu?restaurantName=' + restaurant;\r\n\t\t\tconst list = await axios(urlList);\r\n\t\t\tif ((list.status = 200)) {\r\n\t\t\t\tsetRecomendations(list.data);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst getAnswer = async () => {\r\n\t\t\tconst data = await axios(fullURL);\r\n\t\t\tif (data.status === 200) {\r\n\t\t\t\tconst response = data.data;\r\n\t\t\t\tsetDish(response);\r\n\t\t\t\tsetRestaurant(response.restaurantName);\r\n\t\t\t\tgetList();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tgetAnswer();\r\n\t}, []);\r\n\r\n\t// Generate list of comments\r\n\tfunction showComments(data) {\r\n\t\tconst arrComment = data.comments ? data.comments : [];\r\n\r\n\t\tif (arrComment.length > 0) {\r\n\t\t\tlet listComments = arrComment.map((comment, index) => CreateComments(comment, index));\r\n\t\t\treturn listComments;\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<p className=\"noComments text-center\">No hay comentarios aun, s√© el primero en comentar.</p>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\tconst allComments = showComments(dish);\r\n\r\n\t// values of ratings\r\n\tconst ratings = calcRatings(dish);\r\n\r\n\t//generate recomendations\r\n\tconst getRecomendations = () => {\r\n\t\tlet listRecomendations = [];\r\n\t\tlet filter = dish.category;\r\n\r\n\t\t//add recomendations\r\n\t\tfor (let dish of recomendations) {\r\n\t\t\tlet count = 0;\r\n\t\t\tif (dish.category === filter && dish._id !== dishId) {\r\n\t\t\t\tcount++;\r\n\t\t\t\tlistRecomendations.push(dish);\r\n\t\t\t\tif (count === 4) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//add more recomendations\r\n\t\tif (listRecomendations.length < 3) {\r\n\t\t\tlet count = listRecomendations.length;\r\n\t\t\tfor (let anotherDish of recomendations) {\r\n\t\t\t\tif (anotherDish.category !== filter) {\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t\tlistRecomendations.push(anotherDish);\r\n\t\t\t\t\tif (count === 4) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn listRecomendations;\r\n\t};\r\n\tconst listRecomendation = getRecomendations();\r\n\tconsole.log(restaurant);\r\n\tconsole.log(listRecomendation)\r\n\r\n\t//  - - - - - - - - - - - - - - - Return - - - - - - - - - - - - - - -\r\n\treturn (\r\n\t\t<div className=\"container-fluid g-0\">\r\n\t\t\t<NavBar />\r\n\t\t\t<div className=\"container g-5\">\r\n\t\t\t\t<main className=\"row\">\r\n\t\t\t\t\t<div className=\"col col-12 title text-center\">\r\n\t\t\t\t\t\t<h2>Calificaciones del platillo</h2>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* photo and description */}\r\n\t\t\t\t\t<div className=\"col col-12 col-md-6 g-0\">{ImgDish(dish)}</div>\r\n\t\t\t\t\t<div className=\"col col-12 col-md-6 g-0\">\r\n\t\t\t\t\t\t<div className=\"boxDish\">\r\n\t\t\t\t\t\t\t{DishDescription(dish, ratings)}\r\n\t\t\t\t\t\t\t{TableRatings(ratings)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</main>\r\n\r\n\t\t\t\t<section className=\"row\">\r\n\t\t\t\t\t{/*- - - - Comments section - - - -*/}\r\n\t\t\t\t\t<div className=\"col col-12 col-md-6 g-0\">\r\n\t\t\t\t\t\t{AddComment(dishId)}\r\n\t\t\t\t\t\t{allComments}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/*- - - - Reommendations - - - -*/}\r\n\t\t\t\t\t<div className=\"col col-12 col-md-6 text-center g-0\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h5 id=\"textOtherRec\" className=\"text-center\">\r\n\t\t\t\t\t\t\t\tOtras recomendaciones\r\n\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div id=\"colCardsRecommendations\">{Recomendations(listRecomendation)}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}