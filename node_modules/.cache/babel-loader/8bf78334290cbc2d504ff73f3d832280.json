{"ast":null,"code":"var _jsxFileName = \"/home/nesramblue/Nestor/Kodemia/menus_world/src/components/AddComment/index.jsx\",\n    _s = $RefreshSig$();\n\nimport './AddComment.css';\nimport { useState } from 'react';\nimport { createComment as sendComment } from '../../services/menus';\nimport { getIsLogeddIn, getIsUserAdmin } from '../../Auth/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AddComment(id) {\n  _s();\n\n  const [canComment, setCanComment] = useState(false); //state \n\n  const [text, setText] = useState('');\n  const [existComment, setExistComment] = useState(false);\n  const [isLogIn, setIsLogIn] = useState(true);\n  const [isUser, setUser] = useState(true);\n\n  const sendToServer = () => {\n    if (isLogIn && !existComment && text.length > 0) {\n      const now = new Date();\n      const bodyMsg = {\n        user: \"Usuario Prueba\",\n        rating: 5,\n        comment: text,\n        idUser: \"62d53a3c7\",\n        date: now\n      };\n      console.log(bodyMsg);\n      sendComment(id, bodyMsg);\n      setExistComment(true);\n      console.log(\"mensaje enviado\");\n    } else {\n      console.log(\"hay que registrarse o iniciar sesion para publicar comentarios\");\n    }\n  };\n\n  const sendData = () => {\n    let today = new Date();\n    const data = {\n      user: 'Alberto',\n      rating: 5,\n      comment: text,\n      idUser: '23353',\n      date: today\n    };\n    const Url = 'http://localhost:8000/detalle/' + id;\n    fetch(Url, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    }).then(response => response.json()).then(data => {\n      console.log(\"Success:\", data);\n    }).catch(error => {\n      console.error(\"Error:\", error);\n    });\n  };\n\n  const addNewcomment = msg => {\n    //not logIn\n    if (isLogIn === false) {\n      console.error('Para agregar comentarios debes iniciar sesión');\n    } else {\n      //Is logIn\n      if (isUser === true) {\n        //only user can add comments\n        setCanComment(false);\n        setText(msg);\n        sendData();\n      } else {\n        //admins can't comment\n        console.log('No se puede agregar comentarios con sesión de administrador');\n      }\n    }\n  };\n\n  function createContent() {\n    if (canComment === false) {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"addComment\",\n        type: \"button\",\n        onClick: () => setCanComment(true),\n        children: \"Agrega un comentario\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 5\n      }, this);\n    }\n\n    if (canComment === true) {\n      return /*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"formAddComment\",\n        action: \"/action_page.php\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"textInstructions\",\n          children: \"Escribe un comentario sobre el platillo y deja tu puntuaci\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"addNewComment\",\n          name: \"newComment\",\n          placeholder: \"Escribe tu rese\\xF1a del platillo\",\n          onChange: e => setText(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"addComment\",\n          type: \"button\",\n          onClick: e => addNewcomment(text),\n          children: \"Enviar comentario\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 5\n      }, this);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"addCommentSection\",\n    children: createContent()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AddComment, \"Ut2wq8WHR2k7u5HrVK6yEhqzZLU=\");\n\n_c = AddComment;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddComment\");","map":{"version":3,"names":["useState","createComment","sendComment","getIsLogeddIn","getIsUserAdmin","AddComment","id","canComment","setCanComment","text","setText","existComment","setExistComment","isLogIn","setIsLogIn","isUser","setUser","sendToServer","length","now","Date","bodyMsg","user","rating","comment","idUser","date","console","log","sendData","today","data","Url","fetch","method","headers","body","JSON","stringify","then","response","json","catch","error","addNewcomment","msg","createContent","e","target","value"],"sources":["/home/nesramblue/Nestor/Kodemia/menus_world/src/components/AddComment/index.jsx"],"sourcesContent":["import './AddComment.css';\r\nimport { useState } from 'react';\r\nimport { createComment as sendComment }from '../../services/menus';\r\nimport {getIsLogeddIn, getIsUserAdmin} from '../../Auth/auth'\r\n\r\nexport default function AddComment(id) {\r\n\tconst [canComment, setCanComment] = useState(false);  //state \r\n\tconst [text, setText] = useState('');\r\n\tconst [existComment, setExistComment] = useState(false)\r\n\r\n\tconst [isLogIn, setIsLogIn] = useState(true);\r\n\tconst [isUser, setUser ] = useState(true);\r\n\r\n\tconst sendToServer = () => {\r\n\r\n\t\tif(isLogIn && !existComment && text.length > 0 ){\r\n\t\t\tconst now = new Date()\r\n\t\t\tconst bodyMsg = {\r\n\t\t\t\tuser: \"Usuario Prueba\",\r\n\t\t\t\trating: 5,\r\n\t\t\t\tcomment: text,\r\n\t\t\t\tidUser: \"62d53a3c7\",\r\n\t\t\t\tdate: now,\r\n\t\t\t};\r\n\t\t\tconsole.log(bodyMsg)\r\n\t\t\tsendComment(id,bodyMsg);\r\n\t\t\tsetExistComment(true)\r\n\t\t\tconsole.log(\"mensaje enviado\")\r\n\t\t} else {\r\n\t\t\tconsole.log(\"hay que registrarse o iniciar sesion para publicar comentarios\")\r\n\t\t}\r\n\t}\r\n\r\n\tconst sendData = () => {\r\n\r\n    let today = new Date();\r\n\r\n    const data = {\r\n      user: 'Alberto',\r\n      rating: 5,\r\n      comment: text,\r\n      idUser: '23353',\r\n      date: today,\r\n    };\r\n    const Url = 'http://localhost:8000/detalle/' + id;\r\n\r\n    fetch(Url, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(\"Success:\", data);\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Error:\", error);\r\n      });\r\n  };\r\n\r\n\r\n\r\n\r\n\tconst addNewcomment = (msg) => {\r\n\t\t//not logIn\r\n\t\tif(isLogIn === false){\r\n\t\t\tconsole.error('Para agregar comentarios debes iniciar sesión')\r\n\t\t} else {\r\n\t\t\t//Is logIn\r\n\t\t\tif(isUser === true){\r\n\t\t\t\t//only user can add comments\r\n\t\t\t\tsetCanComment(false);\r\n\t\t\t\tsetText(msg);\r\n\t\t\t\tsendData()\r\n\t\t\t} else {\r\n\t\t\t\t//admins can't comment\r\n\t\t\t\tconsole.log('No se puede agregar comentarios con sesión de administrador')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction createContent() {\r\n\t\tif (canComment === false) {\r\n\t\t\treturn (\r\n\t\t\t\t<button id=\"addComment\" type=\"button\" onClick={() => setCanComment(true)}>\r\n\t\t\t\t\tAgrega un comentario\r\n\t\t\t\t</button>\r\n\t\t\t);\r\n\t\t}\r\n\t\tif (canComment === true) {\r\n\t\t\treturn (\r\n\t\t\t\t<form id=\"formAddComment\" action=\"/action_page.php\">\r\n\t\t\t\t\t<p id=\"textInstructions\">Escribe un comentario sobre el platillo y deja tu puntuación</p>\r\n\t\t\t\t\t<textarea\r\n\t\t\t\t\t\tid=\"addNewComment\"\r\n\t\t\t\t\t\tname=\"newComment\"\r\n\t\t\t\t\t\tplaceholder=\"Escribe tu reseña del platillo\"\r\n\t\t\t\t\t\tonChange={(e) => setText(e.target.value)}\r\n\t\t\t\t\t></textarea>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tid=\"addComment\"\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonClick={(e) => addNewcomment(text)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\tEnviar comentario\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\treturn <div id=\"addCommentSection\">{createContent()}</div>;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}