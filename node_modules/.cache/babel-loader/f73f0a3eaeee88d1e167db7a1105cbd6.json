{"ast":null,"code":"export function calcMean(data) {\n  let values = {\n    1: 0,\n    2: 0,\n    3: 0,\n    4: 0,\n    5: 0\n  };\n  let maxRating = 5;\n  let scoreTotal = 0;\n  let count = 0;\n  let mean = 0;\n\n  if (data.comments) {\n    if (data.comments.length > 0) {\n      for (let comment of data.comments) {\n        values[comment.rating] += 1;\n      }\n\n      for (let i = 1; i <= maxRating; i++) {\n        scoreTotal += i * values[i];\n        count += values[i];\n      }\n\n      mean = (scoreTotal / count).toFixed(1);\n      return '⭐ ' + mean + ' (' + count + ' votos)';\n    } else {\n      return 'Sin calificaciones';\n    }\n  }\n}\nexport function calcRatings(data) {\n  let obj = {\n    totalVotes: 0,\n    mean: 0,\n    rating: '',\n    stars5: 0,\n    stars4: 0,\n    stars3: 0,\n    stars2: 0,\n    stars1: 0\n  };\n  let maxRating = 5;\n  let totalAmount = 0;\n  let count = 0;\n  let mean = 0;\n  let percentages = [];\n  let values = {\n    1: 0,\n    2: 0,\n    3: 0,\n    4: 0,\n    5: 0\n  };\n\n  if (data.comments) {\n    if (data.comments.length > 0) {\n      //extract values\n      for (let comment of data.comments) {\n        values[comment.rating] += 1;\n      } //total of votes\n\n\n      for (let i = 1; i <= maxRating; i++) {\n        count += values[i];\n      } //calc percentages\n\n\n      for (let i = 0; i < maxRating; i++) {\n        percentages[i] = (values[i + 1] / count * 100).toFixed(1);\n      } //calc mean\n\n\n      for (let i = 1; i <= maxRating; i++) {\n        totalAmount += i * values[i];\n      }\n\n      mean = (totalAmount / count).toFixed(1); //add to obj\n\n      obj.totalVotes = count;\n      obj.mean = Number(mean);\n      obj.rating = '⭐ ' + mean + ' (' + count + ' votos)';\n      obj.stars5 = Number(percentages[4]);\n      obj.stars4 = Number(percentages[3]);\n      obj.stars3 = Number(percentages[2]);\n      obj.stars2 = Number(percentages[1]);\n      obj.stars1 = Number(percentages[0]);\n    } else {\n      obj.rating = 'Sin calificaciones';\n    }\n\n    return obj;\n  }\n}","map":{"version":3,"names":["calcMean","data","values","maxRating","scoreTotal","count","mean","comments","length","comment","rating","i","toFixed","calcRatings","obj","totalVotes","stars5","stars4","stars3","stars2","stars1","totalAmount","percentages","Number"],"sources":["/home/nesramblue/Nestor/Kodemia/menus_world/src/services/calcRatings.js"],"sourcesContent":["export function calcMean(data) {\r\n\tlet values = {\r\n\t\t1: 0,\r\n\t\t2: 0,\r\n\t\t3: 0,\r\n\t\t4: 0,\r\n\t\t5: 0,\r\n\t};\r\n\tlet maxRating = 5;\r\n\tlet scoreTotal = 0;\r\n\tlet count = 0;\r\n\tlet mean = 0;\r\n\r\n\tif (data.comments) {\r\n\t\tif (data.comments.length > 0) {\r\n\t\t\tfor (let comment of data.comments) {\r\n\t\t\t\tvalues[comment.rating] += 1;\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 1; i <= maxRating; i++) {\r\n\t\t\t\tscoreTotal += i * values[i];\r\n\t\t\t\tcount += values[i];\r\n\t\t\t}\r\n\t\t\tmean = (scoreTotal / count).toFixed(1);\r\n\r\n\t\t\treturn '⭐ ' + mean + ' (' + count + ' votos)';\r\n\t\t} else {\r\n\t\t\treturn 'Sin calificaciones';\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function calcRatings(data) {\r\n\tlet obj = {\r\n\t\ttotalVotes: 0,\r\n\t\tmean: 0,\r\n\t\trating: '',\r\n\t\tstars5: 0,\r\n\t\tstars4: 0,\r\n\t\tstars3: 0,\r\n\t\tstars2: 0,\r\n\t\tstars1: 0,\r\n\t};\r\n\r\n\tlet maxRating = 5;\r\n\tlet totalAmount = 0;\r\n\tlet count = 0;\r\n\tlet mean = 0;\r\n\tlet percentages = [];\r\n\tlet values = {\r\n\t\t1: 0,\r\n\t\t2: 0,\r\n\t\t3: 0,\r\n\t\t4: 0,\r\n\t\t5: 0,\r\n\t};\r\n\r\n\tif (data.comments) {\r\n\t\tif (data.comments.length > 0) {\r\n\t\t\t//extract values\r\n\t\t\tfor (let comment of data.comments) {\r\n\t\t\t\tvalues[comment.rating] += 1;\r\n\t\t\t}\r\n\r\n\t\t\t//total of votes\r\n\t\t\tfor (let i = 1; i <= maxRating; i++) {\r\n\t\t\t\tcount += values[i];\r\n\t\t\t}\r\n\r\n\t\t\t//calc percentages\r\n\t\t\tfor (let i = 0; i < maxRating; i++) {\r\n\t\t\t\tpercentages[i] = ((values[i + 1] / count) * 100).toFixed(1);\r\n\t\t\t}\r\n\r\n\t\t\t//calc mean\r\n\t\t\tfor (let i = 1; i <= maxRating; i++) {\r\n\t\t\t\ttotalAmount += i * values[i];\r\n\t\t\t}\r\n\t\t\tmean = (totalAmount / count).toFixed(1);\r\n\r\n\t\t\t//add to obj\r\n\t\t\tobj.totalVotes = count;\r\n\t\t\tobj.mean = Number(mean);\r\n\t\t\tobj.rating = '⭐ ' + mean + ' (' + count + ' votos)';\r\n\t\t\tobj.stars5 = Number(percentages[4]);\r\n\t\t\tobj.stars4 = Number(percentages[3]);\r\n\t\t\tobj.stars3 = Number(percentages[2]);\r\n\t\t\tobj.stars2 = Number(percentages[1]);\r\n\t\t\tobj.stars1 = Number(percentages[0]);\r\n\t\t} else {\r\n\t\t\tobj.rating = 'Sin calificaciones';\r\n\t\t}\r\n\r\n\t\treturn obj;\r\n\t}\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}